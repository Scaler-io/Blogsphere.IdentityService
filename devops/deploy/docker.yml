parameters:
  - name: imageName
  - name: tag
    default: "latest"

steps:
  - task: Docker@2
    displayName: "Login to Docker Hub"
    inputs:
      command: "login"
      containerRegistry: "docker-hub-sharthak1995-connection"

  - task: Docker@2
    displayName: "Build Docker Image"
    inputs:
      command: "build"
      Dockerfile: "**/Dockerfile"
      tags: "${{ parameters.imageName }}:${{ parameters.tag }}"

  - task: Docker@2
    displayName: "Push Docker Image"
    inputs:
      command: "push"
      tags: "${{ parameters.imageName }}:${{ parameters.tag }}"
